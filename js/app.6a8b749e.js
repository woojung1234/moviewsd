(function(){"use strict";var e={9877:function(e,t,i){var s=i(5130),o=i(6768),a=(i(4114),i(144)),r=i(782),n=i(1387),l={__name:"AppHeader",setup(e){const t=(0,r.Pj)(),i=(0,n.rd)(),s=(0,o.EW)((()=>t.getters.isLoggedIn)),l=(0,a.KR)(!1),c=e=>{l.value=e},d=()=>{t.dispatch("logout"),i.push("/signin")};return(e,t)=>{const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",{class:"header",onMouseover:t[0]||(t[0]=e=>c(!0)),onMouseleave:t[1]||(t[1]=e=>c(!1))},[(0,o.bF)(i,{to:"/"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("홈")]))),_:1}),t[7]||(t[7]=(0,o.eW)(" | ")),(0,o.bF)(i,{to:"/popular"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("인기 영화")]))),_:1}),t[8]||(t[8]=(0,o.eW)(" | ")),(0,o.bF)(i,{to:"/search"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("검색하기")]))),_:1}),t[9]||(t[9]=(0,o.eW)(" | ")),(0,o.bF)(i,{to:"/wishlist"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("좋아하는 영화")]))),_:1}),t[10]||(t[10]=(0,o.eW)(" | ")),s.value?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:d},"로그아웃")):((0,o.uX)(),(0,o.Wv)(i,{key:1,to:"/signin"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("로그인")]))),_:1}))],32)}}},c=i(1241);const d=(0,c.A)(l,[["__scopeId","data-v-76973a5e"]]);var u=d;const p={id:"app"};var g={__name:"App",setup(e){const t=(0,r.Pj)(),i=(0,o.EW)((()=>t.getters.isLoggedIn));return(e,t)=>{const s=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",p,[i.value?((0,o.uX)(),(0,o.Wv)(u,{key:0})):(0,o.Q3)("",!0),(0,o.bF)(s)])}}};const h=g;var m=h,v=i(4373),y=(0,r.y$)({state:{isLoggedIn:!1,apiKey:null,user:null,popularMovies:[],movieDetails:null,searchedMovies:[],genreMovies:[],genres:[]},getters:{isLoggedIn:e=>e.isLoggedIn,user:e=>e.user,apiKey:e=>e.apiKey,popularMovies:e=>e.popularMovies,movieDetails:e=>e.movieDetails,searchedMovies:e=>e.searchedMovies,genreMovies:e=>e.genreMovies,genres:e=>e.genres},mutations:{SET_LOGIN_STATE(e,t){e.isLoggedIn=t.isLoggedIn,e.apiKey=t.apiKey,e.user=t.user},LOGOUT(e){e.isLoggedIn=!1,e.apiKey=null,e.user=null},SET_POPULAR_MOVIES(e,t){e.popularMovies=t},SET_MOVIE_DETAILS(e,t){e.movieDetails=t},SET_SEARCHED_MOVIES(e,t){e.searchedMovies=t},SET_GENRE_MOVIES(e,t){e.genreMovies=t},SET_GENRES(e,t){e.genres=t}},actions:{async login({commit:e},{apiKey:t,user:i}){try{const s=await v.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:t,language:"ko-KR",page:1}});200===s.status&&(e("SET_LOGIN_STATE",{isLoggedIn:!0,apiKey:t,user:i}),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("apiKey",t),localStorage.setItem("user",JSON.stringify(i)))}catch(s){throw alert("Invalid API Key. Please try again."),new Error("API Key is not valid")}},logout({commit:e}){e("LOGOUT"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("apiKey"),localStorage.removeItem("user")},loadAuthState({commit:e}){const t="true"===localStorage.getItem("isLoggedIn"),i=localStorage.getItem("apiKey"),s=JSON.parse(localStorage.getItem("user"));t&&i&&e("SET_LOGIN_STATE",{isLoggedIn:t,apiKey:i,user:s})},async fetchPopularMovies({commit:e,state:t}){try{if(!t.apiKey)throw new Error("API Key is missing");const i=await v.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:t.apiKey,language:"ko-KR",page:1}});e("SET_POPULAR_MOVIES",i.data.results)}catch(i){console.error("Error fetching popular movies:",i),alert("Failed to fetch movies. Please check your API Key.")}},async fetchMovieDetails({commit:e,state:t},i){try{if(!t.apiKey)throw new Error("API Key is missing");const s=await v.A.get(`https://api.themoviedb.org/3/movie/${i}`,{params:{api_key:t.apiKey,language:"ko-KR"}});e("SET_MOVIE_DETAILS",s.data)}catch(s){console.error("Error fetching movie details:",s),alert("Failed to fetch movie details. Please check your API Key.")}},async fetchSearchedMovies({commit:e,state:t},i){try{if(!t.apiKey)throw new Error("API Key is missing");const s=await v.A.get("https://api.themoviedb.org/3/search/movie",{params:{api_key:t.apiKey,language:"ko-KR",query:i,page:1}});e("SET_SEARCHED_MOVIES",s.data.results)}catch(s){console.error("Error fetching searched movies:",s),alert("Failed to fetch searched movies. Please check your API Key.")}},async fetchGenreMovies({commit:e,state:t},i){try{if(!t.apiKey)throw new Error("API Key is missing");const s=await v.A.get("https://api.themoviedb.org/3/discover/movie",{params:{api_key:t.apiKey,language:"ko-KR",with_genres:i,page:1}});e("SET_GENRE_MOVIES",s.data.results)}catch(s){console.error("Error fetching genre movies:",s),alert("Failed to fetch genre movies. Please check your API Key.")}},async fetchGenres({commit:e,state:t}){try{if(!t.apiKey)throw new Error("API Key is missing");const i=await v.A.get("https://api.themoviedb.org/3/genre/movie/list",{params:{api_key:t.apiKey,language:"ko-KR"}});e("SET_GENRES",i.data.genres)}catch(i){console.error("Error fetching genres:",i),alert("Failed to fetch genres. Please check your API Key.")}}},modules:{}});function f(e,t,i,s,a,r){const n=(0,o.g2)("PopularMoviesTemplate");return(0,o.uX)(),(0,o.Wv)(n)}var k=i(4232);const b={class:"home"},w={key:0,class:"loading"},I={key:1},S={key:0,class:"featured-movie"},L=["src","alt"],E={class:"featured-info"},_={class:"button-group"},C={class:"genre-sections"},P=["onWheel"];function M(e,t,i,a,r,n){const l=(0,o.g2)("MovieCard");return(0,o.uX)(),(0,o.CE)("div",b,[r.loading?((0,o.uX)(),(0,o.CE)("div",w," 데이터를 불러오는 중입니다... ")):((0,o.uX)(),(0,o.CE)("div",I,[r.featuredMovie?((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("img",{src:"https://image.tmdb.org/t/p/original"+r.featuredMovie.backdrop_path,alt:r.featuredMovie.title,class:"featured-image"},null,8,L),(0,o.Lk)("div",E,[(0,o.Lk)("h1",null,(0,k.v_)(r.featuredMovie.title),1),(0,o.Lk)("p",null,(0,k.v_)(r.featuredMovie.overview),1),(0,o.Lk)("div",_,[(0,o.Lk)("button",{class:"play-button",onClick:t[0]||(t[0]=(...e)=>n.playMovie&&n.playMovie(...e))},"▶ 재생"),(0,o.Lk)("button",{class:"details-button",onClick:t[1]||(t[1]=e=>n.goToDetails(r.featuredMovie.id))}," 상세정보 ")])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",C,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.genres,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:e.name,class:"genre-section",ref_for:!0,ref:"genreSections"},[(0,o.Lk)("h2",null,(0,k.v_)(e.name),1),(0,o.Lk)("div",{class:"movie-slider",onWheel:(0,s.D$)((e=>n.handleScroll(e,t)),["prevent"])},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.movies,(e=>((0,o.uX)(),(0,o.Wv)(l,{key:e.id,movie:e},null,8,["movie"])))),128))],40,P)])))),128))])]))])}const K={class:"movie-card"},A=["src","alt"];function R(e,t,i,a,r,n){return(0,o.uX)(),(0,o.CE)("div",K,[(0,o.Lk)("img",{src:"https://image.tmdb.org/t/p/w500"+i.movie.poster_path,alt:i.movie.title,onClick:t[0]||(t[0]=(...e)=>n.toggleWishlist&&n.toggleWishlist(...e))},null,8,A),r.isWishlisted?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"wishlist-icon",onClick:t[1]||(t[1]=(0,s.D$)(((...e)=>n.toggleWishlist&&n.toggleWishlist(...e)),["stop"]))}," ★ ")):(0,o.Q3)("",!0),(0,o.Lk)("h3",null,(0,k.v_)(i.movie.title),1)])}i(8992),i(7550);var F={props:{movie:Object},data(){return{isWishlisted:!1}},created(){this.checkWishlistStatus()},methods:{toggleWishlist(){const e=JSON.parse(localStorage.getItem("wishlist"))||[],t=e.findIndex((e=>e.id===this.movie.id));t>-1?(e.splice(t,1),this.isWishlisted=!1):(e.push(this.movie),this.isWishlisted=!0),localStorage.setItem("wishlist",JSON.stringify(e)),this.$emit("wishlist-updated")},checkWishlistStatus(){const e=JSON.parse(localStorage.getItem("wishlist"))||[];this.isWishlisted=e.some((e=>e.id===this.movie.id))}}};const T=(0,c.A)(F,[["render",R],["__scopeId","data-v-6958e451"]]);var W=T,O=i(7411),X={components:{MovieCard:W},data(){return{featuredMovie:null,genres:[{name:"최신",endpoint:"now_playing",movies:[]},{name:"인기",endpoint:"popular",movies:[]},{name:"코믹",genreId:35,movies:[]},{name:"액션",genreId:28,movies:[]},{name:"로맨스",genreId:10749,movies:[]}],apiKey:null,loading:!0}},async mounted(){const e=(0,O.dj)();if(this.apiKey=localStorage.getItem("apiKey"),!this.apiKey)return e.error("API Key가 없습니다. 로그인을 먼저 진행해주세요."),void this.$router.push("/signin");try{const e=await v.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${this.apiKey}&language=ko-KR&page=1`);this.featuredMovie=e.data.results[0];for(let t of this.genres){const e=t.endpoint?`https://api.themoviedb.org/3/movie/${t.endpoint}?api_key=${this.apiKey}&language=ko-KR&page=1`:`https://api.themoviedb.org/3/discover/movie?api_key=${this.apiKey}&with_genres=${t.genreId}&language=ko-KR&page=1`,i=await v.A.get(e);t.movies=i.data.results.slice(0,20)}}catch(t){console.error("영화 데이터를 불러오는 데 실패했습니다:",t.message),e.error("영화 데이터를 불러오는 데 실패했습니다. 다시 시도해주세요."),this.$router.push("/signin")}finally{this.loading=!1}},methods:{handleScroll(e,t){const i=this.$refs.genreSections[t].querySelector(".movie-slider");i.scrollLeft+=e.deltaY>0?100:-100},playMovie(){},goToDetails(e){this.$router.push({name:"movie-details",params:{id:e}})}}};const $=(0,c.A)(X,[["render",M]]);var V=$,D={components:{MovieCard:W},data(){return{featuredMovie:null,genres:[{name:"최신",endpoint:"now_playing",movies:[]},{name:"인기",endpoint:"popular",movies:[]},{name:"코믹",genreId:35,movies:[]},{name:"액션",genreId:28,movies:[]},{name:"로맨스",genreId:10749,movies:[]}],apiKey:null,loading:!0}},async mounted(){const e=(0,O.dj)();if(this.apiKey=localStorage.getItem("apiKey"),!this.apiKey)return e.error("API Key가 없습니다. 로그인을 먼저 진행해주세요."),void this.$router.push("/signin");try{const e=await v.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${this.apiKey}&language=ko-KR&page=1`);this.featuredMovie=e.data.results[0];for(let t of this.genres){const e=t.endpoint?`https://api.themoviedb.org/3/movie/${t.endpoint}?api_key=${this.apiKey}&language=ko-KR&page=1`:`https://api.themoviedb.org/3/discover/movie?api_key=${this.apiKey}&with_genres=${t.genreId}&language=ko-KR&page=1`,i=await v.A.get(e);t.movies=i.data.results.slice(0,20)}}catch(t){console.error("영화 데이터를 불러오는 데 실패했습니다:",t.message),e.error("영화 데이터를 불러오는 데 실패했습니다. 다시 시도해주세요."),this.$router.push("/signin")}finally{this.loading=!1}},methods:{handleScroll(e,t){const i=this.$refs.genreSections[t].querySelector(".movie-slider");i.scrollLeft+=e.deltaY>0?100:-100},playMovie(){console.log("Play Movie clicked!")},goToDetails(e){this.$router.push({name:"movie-details",params:{id:e}})}}},q={components:{PopularMoviesTemplate:V},mixins:[D]};const j=(0,c.A)(q,[["render",f]]);var J=j;const N={key:0,class:"movie-details"},U=["src","alt"],G={key:1};function x(e,t,i,s,a,r){return r.movie?((0,o.uX)(),(0,o.CE)("div",N,[(0,o.Lk)("h1",null,(0,k.v_)(r.movie.title),1),(0,o.Lk)("img",{src:"https://image.tmdb.org/t/p/w500"+r.movie.poster_path,alt:r.movie.title},null,8,U),(0,o.Lk)("p",null,(0,k.v_)(r.movie.overview),1),(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[t[0]||(t[0]=(0,o.Lk)("strong",null,"평점:",-1)),(0,o.eW)(" "+(0,k.v_)(r.movie.vote_average),1)]),(0,o.Lk)("li",null,[t[1]||(t[1]=(0,o.Lk)("strong",null,"개봉일:",-1)),(0,o.eW)(" "+(0,k.v_)(r.movie.release_date),1)])])])):((0,o.uX)(),(0,o.CE)("div",G,t[2]||(t[2]=[(0,o.Lk)("p",null,"영화 정보를 불러오는 중입니다...",-1)])))}var Q={data(){return{movieId:this.$route.params.id}},computed:{...(0,r.L8)(["movieDetails"]),movie(){return this.movieDetails}},methods:{...(0,r.i0)(["fetchMovieDetails"])},async mounted(){await this.fetchMovieDetails(this.movieId)}};const H=(0,c.A)(Q,[["render",x],["__scopeId","data-v-293801ce"]]);var B=H;function Y(e,t,i,s,a,r){const n=(0,o.g2)("SearchMovies",!0);return(0,o.uX)(),(0,o.Wv)(n)}const z={class:"search"},Z={class:"search-filters"},ee=["value"],te={key:0,class:"recent-searches"},ie=["onClick"],se={class:"poster-wrapper"},oe=["src","alt","onClick"],ae={key:0,class:"wishlist-star"},re={key:0,class:"loading"};function ne(e,t,i,a,r,n){return(0,o.uX)(),(0,o.CE)("div",z,[(0,o.Lk)("div",Z,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.query=t),onInput:t[1]||(t[1]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),placeholder:"영화 검색..."},null,544),[[s.Jo,e.query]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedGenre=t),onChange:t[3]||(t[3]=(...t)=>e.applyFilters&&e.applyFilters(...t))},[t[10]||(t[10]=(0,o.Lk)("option",{value:""},"장르 선택",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.genres,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,k.v_)(e.name),9,ee)))),128))],544),[[s.u1,e.selectedGenre]]),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=t=>e.minRating=t),onInput:t[5]||(t[5]=(...t)=>e.applyFilters&&e.applyFilters(...t)),placeholder:"최소 평점 (0 ~ 10)",min:"0",max:"10"},null,544),[[s.Jo,e.minRating]]),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=t=>e.releaseDate=t),onChange:t[7]||(t[7]=(...t)=>e.applyFilters&&e.applyFilters(...t))},null,544),[[s.Jo,e.releaseDate]]),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...t)=>e.resetFilters&&e.resetFilters(...t))},"필터 초기화")]),e.recentSearches.length?((0,o.uX)(),(0,o.CE)("div",te,[t[11]||(t[11]=(0,o.Lk)("h4",null,"최근 검색어",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.recentSearches,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t,onClick:i=>e.applyRecentSearch(t)},(0,k.v_)(t),9,ie)))),128))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:"movie-list",ref:"scrollContainer",onScroll:t[9]||(t[9]=(...t)=>e.handleScroll&&e.handleScroll(...t))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.filteredMovies,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"movie-card"},[(0,o.Lk)("div",se,[(0,o.Lk)("img",{src:"https://image.tmdb.org/t/p/w500"+t.poster_path,alt:t.title,onClick:i=>e.toggleWishlist(t)},null,8,oe),e.isInWishlist(t)?((0,o.uX)(),(0,o.CE)("span",ae,"★")):(0,o.Q3)("",!0)]),(0,o.Lk)("h3",null,(0,k.v_)(t.title),1)])))),128)),e.loading?((0,o.uX)(),(0,o.CE)("div",re,"로딩 중...")):(0,o.Q3)("",!0)],544)])}i(4520),i(1454);var le=i(8626),ce={data(){return{movies:[],allMovies:[],genres:[],selectedGenre:"",minRating:"",releaseDate:"",query:"",recentSearches:[],page:1,loading:!1,isEndOfData:!1,apiKey:localStorage.getItem("apiKey")}},created(){const e=(0,O.dj)();if(!this.apiKey)return e.error("로그인 세션이 만료되었습니다. 다시 로그인해주세요."),void this.$router.push("/signin");this.debouncedSearch=(0,le.debounce)(this.searchMovies,500),this.fetchGenres(),this.loadInitialMovies(),this.loadRecentSearches()},computed:{filteredMovies(){return this.movies.filter((e=>{const t=!this.selectedGenre||e.genre_ids.includes(parseInt(this.selectedGenre)),i=!this.minRating||e.vote_average>=parseFloat(this.minRating),s=!this.releaseDate||e.release_date>=this.releaseDate;return t&&i&&s}))}},methods:{loadRecentSearches(){const e=JSON.parse(localStorage.getItem("recentSearches"))||[];this.recentSearches=e},saveSearchQuery(e){if(!e.trim())return;const t=[e,...this.recentSearches.filter((t=>t!==e))];this.recentSearches=t.slice(0,10),localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches))},async fetchGenres(){const e=(0,O.dj)();try{const e=await v.A.get(`https://api.themoviedb.org/3/genre/movie/list?api_key=${this.apiKey}&language=ko-KR`);this.genres=e.data.genres}catch(t){console.error("장르 목록 가져오기 실패:",t),e.error("장르 데이터를 불러오지 못했습니다.")}},async loadInitialMovies(){const e=(0,O.dj)();try{this.loading=!0;const e=await v.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${this.apiKey}&language=ko-KR&page=${this.page}`);this.allMovies=[...this.allMovies,...e.data.results],this.movies=[...this.allMovies],0===e.data.results.length&&(this.isEndOfData=!0)}catch(t){console.error("초기 영화 데이터 로드 실패:",t),e.error("영화 데이터를 불러오지 못했습니다.")}finally{this.loading=!1}},handleScroll(){const e=this.$refs.scrollContainer;e.scrollTop+e.clientHeight>=e.scrollHeight&&!this.loading&&!this.isEndOfData&&(this.page++,this.loadInitialMovies())},applyFilters(){this.movies=this.allMovies},resetFilters(){this.query="",this.selectedGenre="",this.minRating="",this.releaseDate="",this.applyFilters()},async searchMovies(){const e=(0,O.dj)();if(this.query.trim()){this.saveSearchQuery(this.query);try{const e=await v.A.get(`https://api.themoviedb.org/3/search/movie?api_key=${this.apiKey}&query=${this.query}&language=ko-KR`);this.movies=e.data.results}catch(t){console.error("영화 검색 오류:",t),e.error("검색 결과를 가져오지 못했습니다.")}}else this.movies=this.allMovies},applyRecentSearch(e){this.query=e,this.searchMovies()},toggleWishlist(e){let t=JSON.parse(localStorage.getItem("wishlist"))||[];const i=t.findIndex((t=>t.id===e.id));-1===i?t.push(e):t.splice(i,1),localStorage.setItem("wishlist",JSON.stringify(t)),this.movies=this.movies.map((t=>(t.id===e.id&&(t.isInWishlist=!t.isInWishlist),t)))},isInWishlist(e){const t=JSON.parse(localStorage.getItem("wishlist"))||[];return t.some((t=>t.id===e.id))}}};const de=(0,c.A)(ce,[["render",ne],["__scopeId","data-v-033a0c32"]]);var ue=de,pe={name:"SearchMoviesPage",components:{SearchMovies:ue}};const ge=(0,c.A)(pe,[["render",Y]]);var he=ge;function me(e,t,i,s,a,r){const n=(0,o.g2)("TrendMovies",!0);return(0,o.uX)(),(0,o.Wv)(n)}const ve={class:"trend-movies"},ye={class:"view-options"},fe={key:0,class:"movie-list table-view"},ke={class:"pagination"},be=["disabled"],we=["disabled"],Ie={key:0,class:"loading"};function Se(e,t,i,s,a,r){const n=(0,o.g2)("movie-card");return(0,o.uX)(),(0,o.CE)("div",ve,[(0,o.Lk)("div",ye,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.changeView("table"))},"Table View"),(0,o.Lk)("button",{onClick:t[1]||(t[1]=t=>e.changeView("infinite"))},"Infinite Scroll")]),"table"===e.viewType?((0,o.uX)(),(0,o.CE)("div",fe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.paginatedMovies,(e=>((0,o.uX)(),(0,o.Wv)(n,{key:e.id,movie:e},null,8,["movie"])))),128)),(0,o.Lk)("div",ke,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=t=>e.changePage("previous")),disabled:1===e.page},"이전",8,be),(0,o.Lk)("span",null,"페이지 "+(0,k.v_)(e.page),1),(0,o.Lk)("button",{onClick:t[3]||(t[3]=t=>e.changePage("next")),disabled:e.page*e.itemsPerPage>=e.totalResults},"다음",8,we)])])):(0,o.Q3)("",!0),"infinite"===e.viewType?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"movie-list infinite-scroll",onScroll:t[4]||(t[4]=(...t)=>e.loadMore&&e.loadMore(...t)),ref:"scrollContainer"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.movies,(e=>((0,o.uX)(),(0,o.Wv)(n,{key:e.id,movie:e},null,8,["movie"])))),128)),e.loading?((0,o.uX)(),(0,o.CE)("div",Ie,"Loading...")):(0,o.Q3)("",!0)],544)):(0,o.Q3)("",!0),"infinite"===e.viewType&&e.isScrolled?((0,o.uX)(),(0,o.CE)("button",{key:2,class:"scroll-to-top",onClick:t[5]||(t[5]=(...t)=>e.scrollToTop&&e.scrollToTop(...t))}," ▲ ")):(0,o.Q3)("",!0)])}var Le={components:{MovieCard:W},data(){return{viewType:"table",movies:[],page:1,loading:!1,itemsPerPage:20,totalResults:0,isScrolled:!1}},mounted(){this.calculateItemsPerPage(),window.addEventListener("resize",this.calculateItemsPerPage),this.$refs.scrollContainer&&this.$refs.scrollContainer.addEventListener("scroll",this.checkScroll),this.fetchMovies()},beforeUnmount(){this.$refs.scrollContainer&&this.$refs.scrollContainer.removeEventListener("scroll",this.checkScroll)},computed:{paginatedMovies(){const e=(this.page-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.movies.slice(e,t)}},methods:{calculateItemsPerPage(){const e=320,t=220,i=100,s=50,o=window.innerHeight-i-s-50,a=window.innerWidth-50,r=Math.floor(o/e),n=Math.floor(a/t);this.itemsPerPage=r*n},async fetchMovies(){const e="1cc6831125c4a1baf8f809dc1f68ec14";try{this.loading=!0;const t=await v.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=${this.page}`);1===this.page?this.movies=t.data.results:this.movies.push(...t.data.results),this.totalResults=t.data.total_results}catch(t){console.error("영화 데이터를 가져오는 데 오류가 발생했습니다.",t)}finally{this.loading=!1}},toggleWishlist(e){const t=JSON.parse(localStorage.getItem("wishlist"))||[],i=t.findIndex((t=>t.id===e.id));-1===i?t.push(e):t.splice(i,1),localStorage.setItem("wishlist",JSON.stringify(t))},changeView(e){this.viewType=e,this.page=1,this.movies=[],this.fetchMovies()},changePage(e){"previous"===e&&this.page>1?this.page--:"next"===e&&this.page*this.itemsPerPage<this.totalResults&&this.page++,this.fetchMovies()},loadMore(){this.loading||(this.page++,this.fetchMovies())},scrollToTop(){const e=this.$refs.scrollContainer;e.scrollTo({top:0,behavior:"smooth"})},checkScroll(){const e=this.$refs.scrollContainer;this.isScrolled=e.scrollTop>300}}};const Ee=(0,c.A)(Le,[["render",Se],["__scopeId","data-v-06aeb7dd"]]);var _e=Ee,Ce={name:"TrendMoviesPage",components:{TrendMovies:_e}};const Pe=(0,c.A)(Ce,[["render",me]]);var Me=Pe;const Ke={class:"wishlist"},Ae={key:0,class:"movie-list"},Re={key:1};function Fe(e,t,i,s,a,r){const n=(0,o.g2)("movie-card");return(0,o.uX)(),(0,o.CE)("div",Ke,[t[1]||(t[1]=(0,o.Lk)("h1",null,"위시리스트",-1)),a.movies.length>0?((0,o.uX)(),(0,o.CE)("div",Ae,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.movies,(e=>((0,o.uX)(),(0,o.Wv)(n,{key:e.id,movie:e,onWishlistUpdated:r.loadWishlist},null,8,["movie","onWishlistUpdated"])))),128))])):((0,o.uX)(),(0,o.CE)("div",Re,t[0]||(t[0]=[(0,o.Lk)("p",null,"찜한 영화가 없습니다.",-1)])))])}var Te={components:{MovieCard:W},data(){return{movies:[]}},created(){this.loadWishlist()},methods:{loadWishlist(){const e=JSON.parse(localStorage.getItem("wishlist"))||[];this.movies=e}}};const We=(0,c.A)(Te,[["render",Fe],["__scopeId","data-v-4b137768"]]);var Oe=We;const Xe={class:"signin-page"};function $e(e,t,i,s,a,r){const n=(0,o.g2)("SignIn");return(0,o.uX)(),(0,o.CE)("div",Xe,[(0,o.bF)(n)])}const Ve={class:"container"},De={id:"phone"},qe={id:"content-wrapper"},je={class:"checkbox remember"},Je=["disabled"],Ne={class:"checkbox remember"},Ue=["disabled"];function Ge(e,t,i,a,r,n){return(0,o.uX)(),(0,o.CE)("div",null,[t[32]||(t[32]=(0,o.Lk)("div",{class:"bg-image"},null,-1)),(0,o.Lk)("div",Ve,[(0,o.Lk)("div",De,[(0,o.Lk)("div",qe,[(0,o.Lk)("div",{class:(0,k.C4)(["card",{hidden:!a.isLoginVisible}]),id:"login"},[(0,o.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>a.handleLogin&&a.handleLogin(...e)),["prevent"]))},[t[24]||(t[24]=(0,o.Lk)("h1",null,"Sign in",-1)),(0,o.Lk)("div",{class:(0,k.C4)(["input",{active:a.isEmailFocused||a.email}])},[(0,o.bo)((0,o.Lk)("input",{id:"email",type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e),onFocus:t[1]||(t[1]=e=>a.focusInput("email")),onBlur:t[2]||(t[2]=e=>a.blurInput("email")),required:""},null,544),[[s.Jo,a.email]]),t[21]||(t[21]=(0,o.Lk)("label",{for:"email"},"Username or Email",-1))],2),(0,o.Lk)("div",{class:(0,k.C4)(["input",{active:a.isPasswordFocused||a.password}])},[(0,o.bo)((0,o.Lk)("input",{id:"password",type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>a.password=e),onFocus:t[4]||(t[4]=e=>a.focusInput("password")),onBlur:t[5]||(t[5]=e=>a.blurInput("password")),required:""},null,544),[[s.Jo,a.password]]),t[22]||(t[22]=(0,o.Lk)("label",{for:"password"},"Password",-1))],2),(0,o.Lk)("span",je,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"remember","onUpdate:modelValue":t[6]||(t[6]=e=>a.rememberMe=e)},null,512),[[s.lH,a.rememberMe]]),t[23]||(t[23]=(0,o.Lk)("label",{for:"remember",class:"read-text"},"Remember me",-1))]),(0,o.Lk)("button",{disabled:!a.isLoginFormValid},"Login",8,Je)],32),(0,o.Lk)("a",{href:"javascript:void(0)",class:"account-check",onClick:t[8]||(t[8]=(...e)=>a.toggleCard&&a.toggleCard(...e))},t[25]||(t[25]=[(0,o.eW)(" Don't have an account? "),(0,o.Lk)("b",null,"Sign up",-1)]))],2),(0,o.Lk)("div",{class:(0,k.C4)(["card",{hidden:a.isLoginVisible}]),id:"register"},[(0,o.Lk)("form",{onSubmit:t[19]||(t[19]=(0,s.D$)(((...e)=>a.handleRegister&&a.handleRegister(...e)),["prevent"]))},[t[30]||(t[30]=(0,o.Lk)("h1",null,"Sign up",-1)),(0,o.Lk)("div",{class:(0,k.C4)(["input",{active:a.isRegisterEmailFocused||a.registerEmail}])},[(0,o.bo)((0,o.Lk)("input",{id:"register-email",type:"email","onUpdate:modelValue":t[9]||(t[9]=e=>a.registerEmail=e),onFocus:t[10]||(t[10]=e=>a.focusInput("registerEmail")),onBlur:t[11]||(t[11]=e=>a.blurInput("registerEmail")),required:""},null,544),[[s.Jo,a.registerEmail]]),t[26]||(t[26]=(0,o.Lk)("label",{for:"register-email"},"Email",-1))],2),(0,o.Lk)("div",{class:(0,k.C4)(["input",{active:a.isRegisterPasswordFocused||a.registerPassword}])},[(0,o.bo)((0,o.Lk)("input",{id:"register-password",type:"password","onUpdate:modelValue":t[12]||(t[12]=e=>a.registerPassword=e),onFocus:t[13]||(t[13]=e=>a.focusInput("registerPassword")),onBlur:t[14]||(t[14]=e=>a.blurInput("registerPassword")),required:""},null,544),[[s.Jo,a.registerPassword]]),t[27]||(t[27]=(0,o.Lk)("label",{for:"register-password"},"Password",-1))],2),(0,o.Lk)("div",{class:(0,k.C4)(["input",{active:e.isConfirmPasswordFocused||e.confirmPassword}])},[(0,o.bo)((0,o.Lk)("input",{id:"confirm-password",type:"password","onUpdate:modelValue":t[15]||(t[15]=t=>e.confirmPassword=t),onFocus:t[16]||(t[16]=e=>a.focusInput("confirmPassword")),onBlur:t[17]||(t[17]=e=>a.blurInput("confirmPassword")),required:""},null,544),[[s.Jo,e.confirmPassword]]),t[28]||(t[28]=(0,o.Lk)("label",{for:"confirm-password"},"Confirm Password",-1))],2),(0,o.Lk)("span",Ne,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"terms","onUpdate:modelValue":t[18]||(t[18]=t=>e.acceptTerms=t),required:""},null,512),[[s.lH,e.acceptTerms]]),t[29]||(t[29]=(0,o.Lk)("label",{for:"terms",class:"read-text"},[(0,o.eW)("I have read "),(0,o.Lk)("b",null,"Terms and Conditions")],-1))]),(0,o.Lk)("button",{disabled:!a.isRegisterFormValid},"Register",8,Ue)],32),(0,o.Lk)("a",{href:"javascript:void(0)",class:"account-check",onClick:t[20]||(t[20]=(...e)=>a.toggleCard&&a.toggleCard(...e))},t[31]||(t[31]=[(0,o.eW)(" Already have an account? "),(0,o.Lk)("b",null,"Sign in",-1)]))],2)])])])])}function xe({useRouter:e,useStore:t,ref:i,computed:s}){const o=i(!0),a=i(""),r=i(""),n=i(""),l=i(""),c=i(!1),d=i(!1),u=i(!1),p=i(!1),g=i(!1),h=e(),m=t(),y=s((()=>a.value&&r.value)),f=s((()=>n.value&&l.value)),k=()=>{o.value=!o.value},b=e=>{"email"===e&&(d.value=!0),"password"===e&&(u.value=!0),"registerEmail"===e&&(p.value=!0),"registerPassword"===e&&(g.value=!0)},w=e=>{"email"===e&&(d.value=!1),"password"===e&&(u.value=!1),"registerEmail"===e&&(p.value=!1),"registerPassword"===e&&(g.value=!1)},I=async()=>{const e=(0,O.dj)();try{const t=await v.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:r.value,language:"en-US",page:1}});200===t.status&&(await m.dispatch("login",{apiKey:r.value,user:{email:a.value}}),c.value&&localStorage.setItem("email",a.value),e.success("Login successful!"),h.push("/"))}catch(t){e.error("Invalid API Key. Please check and try again.")}},S=async()=>{const e=(0,O.dj)();try{const t=await v.A.get("https://api.themoviedb.org/3/movie/popular",{params:{api_key:l.value,language:"en-US",page:1}});if(200===t.status){if(localStorage.getItem(n.value))return void e.error("This email is already registered.");localStorage.setItem(n.value,JSON.stringify({password:l.value})),e.success("Registration successful! Please log in."),k()}}catch(t){e.error("Invalid API Key for registration. Please check and try again.")}};return{isLoginVisible:o,email:a,password:r,registerEmail:n,registerPassword:l,rememberMe:c,isEmailFocused:d,isPasswordFocused:u,isRegisterEmailFocused:p,isRegisterPasswordFocused:g,isLoginFormValid:y,isRegisterFormValid:f,toggleCard:k,focusInput:b,blurInput:w,handleLogin:I,handleRegister:S}}var Qe={setup(){const{isLoginVisible:e,email:t,password:i,registerEmail:s,registerPassword:l,rememberMe:c,isEmailFocused:d,isPasswordFocused:u,isRegisterEmailFocused:p,isRegisterPasswordFocused:g,isLoginFormValid:h,isRegisterFormValid:m,toggleCard:v,focusInput:y,blurInput:f,handleLogin:k,handleRegister:b}=xe({useRouter:n.rd,useStore:r.Pj,ref:a.KR,computed:o.EW});return{isLoginVisible:e,email:t,password:i,registerEmail:s,registerPassword:l,rememberMe:c,isEmailFocused:d,isPasswordFocused:u,isRegisterEmailFocused:p,isRegisterPasswordFocused:g,isLoginFormValid:h,isRegisterFormValid:m,toggleCard:v,focusInput:y,blurInput:f,handleLogin:k,handleRegister:b}}};const He=(0,c.A)(Qe,[["render",Ge],["__scopeId","data-v-49d3c08c"]]);var Be=He,Ye={components:{SignIn:Be},setup(){const e=xe({useRouter:n.rd,useStore:r.Pj,ref:a.KR,computed:o.EW});return{...e}}};const ze=(0,c.A)(Ye,[["render",$e],["__scopeId","data-v-714c2fbd"]]);var Ze=ze;const et=[{path:"/signin",name:"signin",component:Ze},{path:"/",name:"home",component:J,meta:{requiresAuth:!0}},{path:"/popular",name:"popular",component:Me,meta:{requiresAuth:!0}},{path:"/movie/:id",name:"movie-details",component:B,props:!0,meta:{requiresAuth:!0}},{path:"/search",name:"search",component:he,meta:{requiresAuth:!0}},{path:"/wishlist",name:"wishlist",component:Oe,meta:{requiresAuth:!0}}],tt=(0,n.aE)({history:(0,n.LA)("/moviewsd/"),routes:et});tt.beforeEach(((e,t,i)=>{const s=y.getters.isLoggedIn;"signin"===e.name&&s?i({name:"home"}):e.meta.requiresAuth&&!s?i({name:"signin"}):i()}));var it=tt;i(7917);const st=(0,s.Ef)(m),ot={position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0};st.use(O.Ay,ot),st.use(y).use(it).mount("#app")}},t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=e,function(){var e=[];i.O=function(t,s,o,a){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],a=e[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(n=!1,a<r&&(r=a));if(n){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,o,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,r=s[0],n=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in n)i.o(n,o)&&(i.m[o]=n[o]);if(l)var d=l(i)}for(t&&t(s);c<r.length;c++)a=r[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},s=self["webpackChunkmoviewsd"]=self["webpackChunkmoviewsd"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(9877)}));s=i.O(s)})();
//# sourceMappingURL=app.6a8b749e.js.map